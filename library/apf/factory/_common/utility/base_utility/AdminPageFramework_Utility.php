<?php 
/**
	Admin Page Framework v3.9.0b06 by Michael Uno 
	Generated by PHP Class Files Script Generator <https://github.com/michaeluno/PHP-Class-Files-Script-Generator>
	<http://en.michaeluno.jp/admin-page-framework>
	Copyright (c) 2013-2021, Michael Uno; Licensed under MIT <http://opensource.org/licenses/MIT> */
class AdminPageFramework_Utility extends AdminPageFramework_Utility_HTMLAttribute {
    static public function getHTTPRequestSanitized(array $aRequest, $bStripSlashes = true) {
        foreach ($aRequest as $_isIndex => $_mValue) {
            if (is_array($_mValue)) {
                $aRequest[$_isIndex] = self::getHTTPRequestSanitized($_mValue, $bStripSlashes);
                continue;
            }
            if (is_string($_mValue)) {
                $aRequest[$_isIndex] = self::___getHTTPRequestTextValueSanitized($_mValue, $bStripSlashes);
            }
        }
        return $aRequest;
    }
    static private function ___getHTTPRequestTextValueSanitized($sString, $bStripSlashes, $bKeepLineFeeds = true) {
        $sString = $bStripSlashes ? stripslashes($sString) : $sString;
        $_sFiltered = wp_check_invalid_utf8($sString);
        if (!$bKeepLineFeeds) {
            $_sFiltered = preg_replace('/[\r\n\t ]+/', ' ', $_sFiltered);
        }
        $_sFiltered = trim($_sFiltered);
        return self::getOctetsRemoved($_sFiltered);
    }
    static public function getOctetsRemoved($sString) {
        $_sPattern = '/' . '([ \t\n\r\f]|^)(?!.*:\/\/).*' . '\K' . '%[a-f0-9]{2}' . '(?!\w*%\W)' . '/i';
        $_iPos = 0;
        while (preg_match($_sPattern, $sString, $_aMatches, PREG_OFFSET_CAPTURE, $_iPos)) {
            if (!isset($_aMatches[0][0], $_aMatches[0][1])) {
                break;
            }
            $_iPos = $_aMatches[0][1];
            $sString = substr($sString, 0, $_iPos) . substr($sString, $_iPos + strlen($_aMatches[0][0]));
        }
        return $sString;
    }
    static private $___aObjectCache = array();
    static public function setObjectCache($asName, $mValue) {
        self::setMultiDimensionalArray(self::$___aObjectCache, self::getAsArray($asName), $mValue);
    }
    static public function unsetObjectCache($asName) {
        self::unsetDimensionalArrayElement(self::$___aObjectCache, self::getAsArray($asName));
    }
    static public function getObjectCache($asName, $mDefault = null) {
        return self::getArrayValueByArrayKeys(self::$___aObjectCache, self::getAsArray($asName), $mDefault);
    }
    static public function showDeprecationNotice($sDeprecated, $sAlternative = '', $sProgramName = 'Admin Page Framework') {
        trigger_error($sProgramName . ': ' . sprintf($sAlternative ? '<code>%1$s</code> has been deprecated. Use <code>%2$s</code> instead.' : '<code>%1$s</code> has been deprecated.', $sDeprecated, $sAlternative), E_USER_NOTICE);
    }
    public function callBack($oCallable, $asParameters = array()) {
        $_aParameters = self::getAsArray($asParameters, true);
        $_mDefaultValue = self::getElement($_aParameters, 0);
        return is_callable($oCallable) ? call_user_func_array($oCallable, $_aParameters) : $_mDefaultValue;
    }
    static public function hasBeenCalled($sKey) {
        if (isset(self::$___aCallStack[$sKey])) {
            return true;
        }
        self::$___aCallStack[$sKey] = true;
        return false;
    }
    static private $___aCallStack = array();
    static public function getOutputBuffer($cCallable, array $aParameters = array()) {
        ob_start();
        echo call_user_func_array($cCallable, $aParameters);
        $_sContent = ob_get_contents();
        ob_end_clean();
        return $_sContent;
    }
    static public function getObjectInfo($oInstance) {
        $_iCount = count(get_object_vars($oInstance));
        $_sClassName = get_class($oInstance);
        return '(object) ' . $_sClassName . ': ' . $_iCount . ' properties.';
    }
    static public function getAOrB($mValue, $mTrue = null, $mFalse = null) {
        return $mValue ? $mTrue : $mFalse;
    }
    }
    